@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Warm neutral base with gold accents */
    --background: oklch(0.98 0.005 60);
    --foreground: oklch(0.15 0.01 60);
    --card: oklch(1 0 0);
    --card-foreground: oklch(0.15 0.01 60);
    --popover: oklch(1 0 0);
    --popover-foreground: oklch(0.15 0.01 60);
    --primary: oklch(0.45 0.12 40);
    --primary-foreground: oklch(0.98 0.005 40);
    --secondary: oklch(0.92 0.01 60);
    --secondary-foreground: oklch(0.2 0.01 60);
    --muted: oklch(0.94 0.01 60);
    --muted-foreground: oklch(0.5 0.01 60);
    --accent: oklch(0.92 0.02 40);
    --accent-foreground: oklch(0.2 0.02 40);
    --destructive: oklch(0.55 0.22 25);
    --destructive-foreground: oklch(0.98 0.005 25);
    --border: oklch(0.88 0.01 60);
    --input: oklch(0.88 0.01 60);
    --ring: oklch(0.45 0.12 40);
    --radius: 0.5rem;
    --chart-1: oklch(0.55 0.15 30);
    --chart-2: oklch(0.65 0.12 120);
    --chart-3: oklch(0.60 0.14 200);
    --chart-4: oklch(0.70 0.10 280);
    --chart-5: oklch(0.50 0.18 340);
  }

  .dark {
    /* Dark theme with warm tones matching v54 */
    --background: oklch(0.12 0.015 60);
    --foreground: oklch(0.92 0.01 60);
    --card: oklch(0.15 0.015 60);
    --card-foreground: oklch(0.92 0.01 60);
    --popover: oklch(0.15 0.015 60);
    --popover-foreground: oklch(0.92 0.01 60);
    --primary: oklch(0.65 0.15 40);
    --primary-foreground: oklch(0.12 0.015 40);
    --secondary: oklch(0.22 0.02 60);
    --secondary-foreground: oklch(0.92 0.01 60);
    --muted: oklch(0.20 0.02 60);
    --muted-foreground: oklch(0.60 0.02 60);
    --accent: oklch(0.25 0.03 40);
    --accent-foreground: oklch(0.92 0.01 40);
    --destructive: oklch(0.55 0.22 25);
    --destructive-foreground: oklch(0.98 0.005 25);
    --border: oklch(0.25 0.02 60);
    --input: oklch(0.25 0.02 60);
    --ring: oklch(0.65 0.15 40);
    --chart-1: oklch(0.60 0.18 30);
    --chart-2: oklch(0.70 0.15 120);
    --chart-3: oklch(0.65 0.16 200);
    --chart-4: oklch(0.75 0.12 280);
    --chart-5: oklch(0.55 0.20 340);
  }
}

@layer base {
  * {
    @apply border-border;
  }
  
  /* Prevent horizontal overflow globally */
  html {
    overflow-x: hidden;
    width: 100%;
    max-width: 100vw;
  }
  
  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
    overflow-x: hidden;
    width: 100%;
    max-width: 100vw;
    min-width: 320px;
    /* iOS Safari safe area support */
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
  
  /* Ensure root container doesn't create overflow */
  #root {
    overflow-x: hidden;
    width: 100%;
    max-width: 100vw;
    min-height: 100vh;
    /* iOS Safari viewport height fix */
    min-height: -webkit-fill-available;
    display: flex;
    flex-direction: column;
  }
}

/* Admin Dashboard Tabs - v54 Segmented/Pill Style */
.admin-tabs-list {
  @apply inline-flex h-11 items-center justify-start rounded-full bg-muted/50 p-1 text-muted-foreground;
  @apply overflow-x-auto overflow-y-hidden;
  @apply gap-1;
  scrollbar-width: thin;
  scrollbar-color: rgba(128, 128, 128, 0.2) transparent;
}

.admin-tabs-list::-webkit-scrollbar {
  height: 6px;
}

.admin-tabs-list::-webkit-scrollbar-track {
  background: transparent;
}

.admin-tabs-list::-webkit-scrollbar-thumb {
  background-color: rgba(128, 128, 128, 0.2);
  border-radius: 9999px;
}

.admin-tabs-list::-webkit-scrollbar-thumb:hover {
  background-color: rgba(128, 128, 128, 0.3);
}

.admin-tabs-trigger {
  @apply inline-flex items-center justify-center whitespace-nowrap rounded-full px-4 py-2 text-sm font-medium;
  @apply ring-offset-background transition-all;
  @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2;
  @apply disabled:pointer-events-none disabled:opacity-50;
  @apply data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm;
  @apply hover:bg-background/50;
}

/* Mobile horizontal scroll for tabs */
@media (max-width: 640px) {
  .admin-tabs-list {
    @apply w-full justify-start;
  }
}

/* Gradient card styles for dashboard metrics */
.gradient-card-violet {
  background: linear-gradient(135deg, oklch(0.20 0.08 280) 0%, oklch(0.15 0.015 60) 100%);
  border: 1px solid oklch(0.25 0.06 280 / 0.3);
}

.gradient-card-pink {
  background: linear-gradient(135deg, oklch(0.20 0.08 340) 0%, oklch(0.15 0.015 60) 100%);
  border: 1px solid oklch(0.25 0.06 340 / 0.3);
}

.gradient-card-gold {
  background: linear-gradient(135deg, oklch(0.20 0.08 60) 0%, oklch(0.15 0.015 60) 100%);
  border: 1px solid oklch(0.25 0.06 60 / 0.3);
}

.gradient-card-green {
  background: linear-gradient(135deg, oklch(0.20 0.08 140) 0%, oklch(0.15 0.015 60) 100%);
  border: 1px solid oklch(0.25 0.06 140 / 0.3);
}

.gradient-card-blue {
  background: linear-gradient(135deg, oklch(0.20 0.08 220) 0%, oklch(0.15 0.015 60) 100%);
  border: 1px solid oklch(0.25 0.06 220 / 0.3);
}

.gradient-card-orange {
  background: linear-gradient(135deg, oklch(0.20 0.08 40) 0%, oklch(0.15 0.015 60) 100%);
  border: 1px solid oklch(0.25 0.06 40 / 0.3);
}

/* Ensure Radix overlays (Dialog, Sheet, Popover) render above all content */
/* Popovers should be above tables and cards but below dialogs/sheets */
[data-radix-popper-content-wrapper] {
  z-index: 100 !important;
}

[data-radix-popover-content] {
  z-index: 100 !important;
}

/* Dialog/Sheet overlays should be highest */
[data-radix-dialog-overlay],
[data-radix-sheet-overlay] {
  z-index: 200 !important;
}

[data-radix-dialog-content],
[data-radix-sheet-content] {
  z-index: 201 !important;
}

/* Prevent parent containers from clipping popovers */
.popover-container-safe {
  overflow: visible !important;
}

/* Ensure Cards allow popover overflow */
[data-radix-popover-trigger] {
  position: relative;
}
